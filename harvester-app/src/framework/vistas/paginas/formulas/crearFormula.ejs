<head>
    <title>Generador de Fórmulas</title>
    <link href='<%= rutaBase %>src/framework/utils/css/paginas/formulas/moduloFormulas.css' rel='stylesheet' /> 
</head>

<%- include ('../../includes/encabezado.ejs')%>
    <div class='formula-container'>
        <div class='formula-encabezado'>
            <div class='tituloYBoton'>
                <h2>Crear Fórmula</h2>
            <%- include('../../includes/componentes/moleculas/botonConIcono/botonConIcono.ejs', {
                id:'btnAyuda', 
                tipo:'terciario', 
                tamanio:'btn-sm', 
                icono:{
                    nombre: 'info',
                    tamano: 'icono-l',
                    color: 'icono-negro'
                    }
                }
            )
            %>
            </div>
            <div class='prueba'>
                <div class="formula-entrada-nombre">
                    <label for='nombreFormula'>Nombre de la fórmula</label>
                    <input type='text' id='nombreFormula' placeholder='Ingrese un nombre descriptivo' />
                    <div class="info-error-contador">
                        <small id="mensajeErrorNombre" class="mensajeError"></small>
                        <div class="contador-caracteres"></div>
                    </div>
                </div>
                <div class="contenedor-menu-desplegable">
                    <%- include('../../includes/componentes/moleculas/menuDesplegableFormulario/menuDesplegableFormulario.ejs', {
                        idTexto: 'texto-hoja',
                        textoSuperior: 'Hoja seleccionada',
                        textoAyuda: 'Selecciona una hoja',
                        opciones: hojas,
                        placeholder: '',
                        className: 'selector-hoja'
                    })%>
                </div>
            </div>
        </div>

        <div class='formula-seccion-construccion'>
            <div class='formula-selector'>
                <label for='main-function'>Función Principal</label>
                <select id='main-function' onchange='definirEstructura(this, document.getElementById("function-arguments"))'>
                    <option value=''>Seleccionar función</option>
                    <option value='IF'>SI</option>
                    <option value='IFERROR'>SI.ERROR</option>
                    <option value='VLOOKUP'>BUSCARV</option>
                    <option value='ARITHMETIC'>Operación Aritmética</option>
                </select>
            </div>

            <div id='formula-container' class='formula-area-construccion'>
                <div class='bloqueFormula' data-level='0'>
                    <div id='function-arguments' class='argumentosContenedor'>
                        <!-- Los argumentos se generarán dinámicamente aquí -->
                    </div>
                </div>
            </div>

            <div class='formula-seccion-resultado'>
                <label for='resultado'>Fórmula generada:</label>
                <div class='resultado' id='resultado'></div>
            </div>
        </div>

        <div class='formula-acciones'>
            <button id='btnGenerar' class='formula-boton secondary'> 
                <span>Previsualizar</span>
            </button>
            <div class='botonesDerecha'>
                <button id='btnGuardar' class='formula-boton primario'> 
                    <span>Guardar fórmula</span>
                </button>
                <button id='btnCancelar' class='formula-boton secundario'> 
                    <span>Cancelar</span>
                </button>
            </div>
        </div>
    </div>
    <script src='<%= rutaBase %>src/framework/utils/scripts/paginas/formulas/crearFormula.js'></script>
<%- include ('../../includes/piePagina.ejs')%>
