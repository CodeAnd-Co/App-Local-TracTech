<script>
    document.addEventListener("DOMContentLoaded", function () {
      const btnCollapse = document.getElementById('collapse-button');
      const btnExpand = document.getElementById('expand-button');
      const sidebarExpanded = document.getElementById('sidebar-expanded');
      const sidebarCollapsed = document.getElementById('sidebar-collapsed');
  
      if (btnCollapse && btnExpand && sidebarExpanded && sidebarCollapsed) {
        btnCollapse.addEventListener('click', () => {
          sidebarExpanded.style.display = 'none';
          sidebarCollapsed.style.display = 'flex';
          aplicarActivoDesdeStorage();
        });
  
        btnExpand.addEventListener('click', () => {
          sidebarCollapsed.style.display = 'none';
          sidebarExpanded.style.display = 'flex';
          aplicarActivoDesdeStorage();
        });
      }
  
      function activarBotonesSidebar() {
        const botones = document.querySelectorAll('.boton-sidebar');
        botones.forEach(boton => {
          boton.addEventListener('click', () => {
            const seccion = boton.getAttribute('data-seccion');
            const yaActivo = boton.classList.contains('activo');
            botones.forEach(b => b.classList.remove('activo'));
  
            if (!yaActivo && seccion) {
              const coincidentes = document.querySelectorAll(`.boton-sidebar[data-seccion="${seccion}"]`);
              coincidentes.forEach(b => b.classList.add('activo'));
              localStorage.setItem('seccion-activa', seccion);
            } else {
              localStorage.removeItem('seccion-activa');
            }
          });
        });
      }
  
      function aplicarActivoDesdeStorage() {
        const seccion = localStorage.getItem('seccion-activa');
        if (!seccion) return;
  
        const botonesCoincidentes = document.querySelectorAll(`.boton-sidebar[data-seccion="${seccion}"]`);
        botonesCoincidentes.forEach(b => b.classList.add('activo'));
      }
  
      activarBotonesSidebar();
      aplicarActivoDesdeStorage();
    });
  </script>   
  